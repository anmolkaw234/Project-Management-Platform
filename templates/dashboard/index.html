{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'dashboard/style.css' %}">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

{% include 'navbar.html' %}

<div class="main-container" style="padding-top:97px;">
<div class="container-fluid position-relative p-0">

    <div class="row justify-content-center" style="display: inline-block;">
        <div class="tile_count text-center">
            <div class="col-md-2 col-sm-4 tile_stats_count">
                <span class="count_top"><i class="fa fa-briefcase"></i> Total Projects</span>
                <div class="count">{{ users_total_projects }}</div>
                <span class="count_bottom">
                    <i class="{% if percentage_changes.total_projects >= 0 %}green{% else %}red{% endif %}">
                        <i class="fa fa-sort-{% if percentage_changes.total_projects >= 0 %}asc{% else %}desc{% endif %}"></i> 
                        {{ percentage_changes.total_projects }}%
                    </i> From last Week
                </span>
            </div>
            <!-- Active Projects -->
            <div class="col-md-2 col-sm-4 tile_stats_count">
                <span class="count_top"><i class="fa fa-spinner"></i> Active Projects</span>
                <div class="count">{{ user_active_projects }}</div>
                <span class="count_bottom">
                    <i class="{% if percentage_changes.active_projects >= 0 %}green{% else %}red{% endif %}">
                        <i class="fa fa-sort-{% if percentage_changes.active_projects >= 0 %}asc{% else %}desc{% endif %}"></i> 
                        {{ percentage_changes.active_projects }}%
                    </i> From last Week
                </span>
            </div>
            <!-- Completed Projects -->
            <div class="col-md-2 col-sm-4 tile_stats_count">
                <span class="count_top"><i class="fa fa-check"></i> Completed Projects</span>
                <div class="count green">{{ user_completed_proj }}</div>
                <span class="count_bottom">
                    <i class="{% if percentage_changes.completed_projects >= 0 %}green{% else %}red{% endif %}">
                        <i class="fa fa-sort-{% if percentage_changes.completed_projects >= 0 %}asc{% else %}desc{% endif %}"></i> 
                        {{ percentage_changes.completed_projects }}%
                    </i> From last Week
                </span>
            </div>
            <!-- Pending Projects -->
            <div class="col-md-2 col-sm-4 tile_stats_count">
                <span class="count_top"><i class="fa fa-clock"></i> Pending Projects</span>
                <div class="count">{{ user_pending_proj }}</div>
                <span class="count_bottom">
                    <i class="{% if percentage_changes.pending_projects >= 0 %}green{% else %}red{% endif %}">
                        <i class="fa fa-sort-{% if percentage_changes.pending_projects >= 0 %}asc{% else %}desc{% endif %}"></i> 
                        {{ percentage_changes.pending_projects }}%
                    </i> From last Week
                </span>
            </div>
            <!-- Followers -->
            <div class="col-md-2 col-sm-4 tile_stats_count">
                <span class="count_top"><i class="fa fa-users"></i> Followers</span>
                <div class="count">{{ followers }}</div>
                <span class="count_bottom">
                    <i class="{% if percentage_changes.followers >= 0 %}green{% else %}red{% endif %}">
                        <i class="fa fa-sort-{% if percentage_changes.followers >= 0 %}asc{% else %}desc{% endif %}"></i> 
                        {{ percentage_changes.followers }}%
                    </i> From last Week
                </span>
            </div>
            <!-- Tasks Completed -->
            <div class="col-md-2 col-sm-4 tile_stats_count">
                <span class="count_top"><i class="fa fa-tasks"></i> Tasks Completed</span>
                <div class="count">{{ tasks_done }}</div>
                <span class="count_bottom">
                    <i class="{% if percentage_changes.tasks_completed >= 0 %}green{% else %}red{% endif %}">
                        <i class="fa fa-sort-{% if percentage_changes.tasks_completed >= 0 %}asc{% else %}desc{% endif %}"></i> 
                        {{ percentage_changes.tasks_completed }}%
                    </i> From last Week
                </span>
            </div>
        </div>
      </div>
      <!-- /top tiles -->

    <br />

    <div class="col-md-2 col-sm-4">
        <div class="x_panel tile">
          <div class="x_title">
            <h2>Quick Links</h2>
            <ul class="nav navbar-right panel_toolbox">
              <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                  <a class="dropdown-item" href="#">Settings 1</a>
                  <a class="dropdown-item" href="#">Settings 2</a>
                </div>
              </li>
              <li><a class="close-link"><i class="fa fa-close"></i></a></li>
            </ul>
            <div class="clearfix"></div>
          </div>
          <div class="x_content">
            <div class="dashboard-widget-content">
              <ul class="quick-list list-group">
                <li class="list-group-item"><i class="fa fa-project-diagram"></i><a href="#">Manage Projects</a></li>
                <li class="list-group-item"><i class="fa fa-users"></i><a href="#">Team Members</a></li>
                <li class="list-group-item"><i class="fa fa-tasks"></i><a href="#">Tasks Overview</a></li>
                <li class="list-group-item"><i class="fa fa-calendar-check"></i><a href="#">Milestones</a></li>
                <li class="list-group-item"><i class="fa fa-chart-line"></i><a href="#">Performance</a></li>
                <li class="list-group-item"><i class="fa fa-cogs"></i><a href="#">Settings</a></li>
                <li class="list-group-item"><i class="fa fa-sign-out-alt"></i><a href="#">Logout</a></li>
              </ul>
            </div>
          </div>
        </div>
    </div>

    <div class="row">


      <div class="col-md-6 col-sm-4 ">
        <div class="x_panel tile">
          <div class="x_title">
            <h2>Ongoing Progress
            </h2>
            <ul class="nav navbar-right panel_toolbox">
              <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item" href="#">Settings 1</a>
                    <a class="dropdown-item" href="#">Settings 2</a>
                  </div>
              </li>
              <li><a class="close-link"><i class="fa fa-close"></i></a>
              </li>
            </ul>
            <div class="clearfix"></div>
          </div>
          <div class="x_content">
            {% for project in projects %}
                <div class="widget_summary">
                    <div class="w_left w_25">
                        <span> {{project.title}} </span>
                    </div>
                    <div class="w_center w_55">
                        <div class="progress">
                            <div class="progress-bar bg-green" role="progressbar" aria-valuenow="{{project.overall_progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{project.overall_progress}};">
                                <span class="sr-only">{{project.overall_progress}}%% Complete</span>
                            </div>
                        </div>
                    </div>
                    <div class="w_right w_25">
                        <span> {{project.start_date}} </span>
                    </div>
                    <div class="clearfix"></div>
                </div>
            {% endfor %}

          </div>
        </div>
      </div>

      <div class="col-md-6 col-sm-4">
        <div class="x_panel tile">
            <div class="x_title">
                <h2>Network Overview</h2>
                <ul class="nav navbar-right panel_toolbox">
                    <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <a class="dropdown-item" href="#">Settings 1</a>
                            <a class="dropdown-item" href="#">Settings 2</a>
                        </div>
                    </li>
                    <li><a class="close-link"><i class="fa fa-close"></i></a></li>
                </ul>
                <div class="clearfix"></div>
            </div>
            <div class="x_content">
                <table class="" style="width:100%">
                    <thead>
                        <tr>
                            <th>
                                <div class="d-flex justify-content-between">
                                    <div class="p-2">
                                        <p class="mb-0">Partner</p>
                                    </div>
                                    <div class="p-2">
                                        <p class="mb-0">Engagement Level</p>
                                    </div>
                                    <div class="p-2">
                                        <p class="mb-0">Rating</p>
                                    </div>
                                </div>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <table class="tile_info">
                                    {% for review in reviews %}
                                        <tr>
                                            <td>
                                                <p><i class="fa fa-square"></i>{{ review.peer.username }}</p>
                                            </td>
                                            <td>{{ review.engagement_level }}</td>
                                            <td>{{ review.rating }}</td>
                                        </tr>
                                    {% endfor %}
                                </table>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>


    </div>


    <div class="row">
      <div class="col-md-6 col-sm-4 ">
        <div class="x_panel">
          <div class="x_title">
            <h2>Notification <small>Latest</small></h2>
            <ul class="nav navbar-right panel_toolbox">
              <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item" href="#">Settings 1</a>
                    <a class="dropdown-item" href="#">Settings 2</a>
                  </div>
              </li>
              <li><a class="close-link"><i class="fa fa-close"></i></a>
              </li>
            </ul>
            <div class="clearfix"></div>
          </div>
          <div class="x_content">
            <div class="dashboard-widget-content">

              <ul class="list-unstyled timeline widget">
                {% for notification in notifications %}
                    <li>
                        <div class="block">
                          <div class="block_content">
                            <h2 class="title">
                                <a>{{notification.title}}</a>
                            </h2>
                            <div class="byline">
                              <span>{{notification.timestamp}}</span> by <a>{{notification.user.username}}</a>
                            </div>
                            <p class="excerpt">{{notification.content}}</a>
                            </p>
                          </div>
                        </div>
                    </li>

                {% endfor %}

              </ul>
            </div>
          </div>
        </div>
      </div>



          <!-- Start to do list -->
          <div class="col-md-6 col-sm-6 ">
            <div class="x_panel">
              <div class="x_title">
                <h2>To Do List <small>Current tasks</small></h2>
                <ul class="nav navbar-right panel_toolbox">
                  <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                  </li>
                  <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="#">Settings 1</a>
                        <a class="dropdown-item" href="#">Settings 2</a>
                      </div>
                  </li>
                  <li><a class="close-link"><i class="fa fa-close"></i></a>
                  </li>
                </ul>
                <div class="clearfix"></div>
              </div>
              <div class="x_content">

                <div class="">
                    <ul class="to_do">
                        {% for task in todo_list %}
                            <li>
                                <p>
                                    <input type="checkbox" class="flat"> {{task.task_name}}
                                </p>
                            </li>
                        {% endfor %}
                        
                    </ul>
                </div>
              </div>
            </div>
          </div>
          <!-- End to do list -->
          
    </div>
  </div>
  <!-- /page content -->
</div>
</div>
</div>

<script src={% static "dashboard/script.js" %}></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</body>
</html>